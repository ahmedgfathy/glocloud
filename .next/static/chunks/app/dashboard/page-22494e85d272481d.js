(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{4661:(e,s,l)=>{Promise.resolve().then(l.bind(l,4879))},4879:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>g});var t=l(5155),r=l(2108),a=l(5695),d=l(2115),i=l(485),n=l(8932),c=l(5060),o=l(5433),x=l(5895),m=l(3782),h=l(3742);function g(){var e,s,l;let{data:g,status:u}=(0,r.useSession)(),[b,j]=(0,d.useState)(null),[f,p]=(0,d.useState)(0),[N,v]=(0,d.useState)({totalFiles:0,storageUsed:0,sharedFiles:0}),[y,w]=(0,d.useState)(!0);(0,d.useEffect)(()=>{g&&F()},[g,f]);let F=async()=>{try{let e=await fetch("/api/files");if(e.ok){let s=(await e.json()).files||[],l=s.length,t=s.reduce((e,s)=>e+(s.size||0),0);v({totalFiles:l,storageUsed:t,sharedFiles:0})}}catch(e){console.error("Error fetching user stats:",e)}finally{w(!1)}},A=e=>{if(0===e)return"0 GB";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][s]};return"loading"===u?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):("unauthenticated"===u&&(0,a.redirect)("/auth/signin"),(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("main",{className:"ml-64 p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 mb-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,t.jsx)("span",{className:"text-white font-bold text-2xl",children:null==g||null==(s=g.user)||null==(e=s.name)?void 0:e.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:["Welcome back, ",null==g||null==(l=g.user)?void 0:l.name]}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Manage your files and folders securely"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-4 border border-blue-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Total Files"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-blue-700",children:y?"...":N.totalFiles})]}),(0,t.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(o.A,{className:"h-6 w-6 text-white"})})]})}),(0,t.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-4 border border-green-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Storage Used"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-green-700",children:y?"...":A(N.storageUsed)})]}),(0,t.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(x.A,{className:"h-6 w-6 text-white"})})]})}),(0,t.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-4 border border-purple-200",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Shared Files"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-purple-700",children:y?"...":N.sharedFiles})]}),(0,t.jsx)("div",{className:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center",children:(0,t.jsx)(m.A,{className:"h-6 w-6 text-white"})})]})})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6",children:[(0,t.jsxs)("h2",{className:"text-xl font-bold text-white flex items-center",children:[(0,t.jsx)(h.A,{className:"h-6 w-6 mr-3"}),"Upload Files"]}),(0,t.jsx)("p",{className:"text-blue-100 mt-1",children:"Drag and drop or click to upload"})]}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)(i.A,{parentId:b,onUploadSuccess:()=>{p(e=>e+1),F()}})})]}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden",children:(0,t.jsx)(n.A,{parentId:b,onFolderClick:j,refreshTrigger:f})})]}),(0,t.jsxs)("div",{className:"lg:col-span-1 space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-orange-500 to-red-500 rounded-lg mr-3"}),"Storage Info"]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Used"}),(0,t.jsx)("span",{className:"font-bold text-gray-900",children:y?"...":A(N.storageUsed)})]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("span",{className:"text-gray-600 font-medium",children:"Available"}),(0,t.jsx)("span",{className:"font-bold text-green-600",children:"Unlimited"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-purple-500 h-3 rounded-full transition-all duration-500",style:{width:"5%"}})}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:[N.totalFiles," files stored"]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:[(0,t.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg mr-3"}),"Recent Activity"]}),(0,t.jsx)("div",{className:"space-y-3",children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(o.A,{className:"h-8 w-8 text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No recent activity"}),(0,t.jsx)("p",{className:"text-gray-400 text-xs",children:"Upload files to see activity here"})]})})]})]})]})]})})]}))}}},e=>{e.O(0,[108,249,607,134,815,441,964,358],()=>e(e.s=4661)),_N_E=e.O()}]);