(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[93],{3891:(e,t,s)=>{Promise.resolve().then(s.bind(s,5948))},4684:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(2115);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))})},5060:(e,t,s)=>{"use strict";s.d(t,{A:()=>b});var r=s(5155),a=s(2108),l=s(6874),i=s.n(l),n=s(6766),d=s(5695),c=s(9994),o=s(5433),x=s(3782),h=s(4219),m=s(5500),u=s(5246),g=s(5141),f=s(3742),j=s(5895),p=s(5596);function b(){var e,t,s,l;let{data:b}=(0,a.useSession)(),v=(0,d.usePathname)(),N=(0,d.useRouter)(),w=(null==b||null==(e=b.user)?void 0:e.role)==="SUPER_ADMIN"||(null==b||null==(t=b.user)?void 0:t.role)==="ADMIN",y=[{name:"Dashboard",href:"/dashboard",icon:c.A},{name:"My Files",href:"/dashboard/files",icon:o.A},{name:"Shared with Me",href:"/dashboard/shared",icon:x.A}],A=[{name:"User Management",href:"/admin/users",icon:h.A},{name:"System Analytics",href:"/admin/analytics",icon:m.A},{name:"Settings",href:"/admin/settings",icon:u.A}],k=[{name:"Create Folder",icon:g.A,action:"create-folder"},{name:"Upload Files",icon:f.A,action:"upload-files"},{name:"Share Folder",icon:x.A,action:"share-folder"}],S=e=>v===e||v.startsWith(e+"/");return(0,r.jsxs)("div",{className:"fixed left-0 top-0 bottom-0 flex flex-col w-64 bg-gradient-to-b from-gray-900 to-black text-white shadow-2xl z-30",children:[(0,r.jsx)("div",{className:"flex items-center h-16 px-6 bg-black border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:[(0,r.jsx)(n.default,{src:"/logo.svg",alt:"Company Logo",width:24,height:24,className:"w-6 h-6",onError:e=>{e.currentTarget.style.display="none"}}),(0,r.jsx)(j.A,{className:"h-6 w-6 text-white hidden"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-white text-xl font-bold tracking-tight",children:"PMS Cloud"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs font-medium",children:"File Management System"})]})]})}),(null==b?void 0:b.user)&&(0,r.jsx)("div",{className:"px-6 py-5 bg-gray-800/50 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:(0,r.jsx)("span",{className:"text-white font-bold text-lg",children:null==(s=b.user.name)?void 0:s.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-white text-sm font-semibold truncate",children:b.user.name}),(0,r.jsx)("p",{className:"text-gray-300 text-xs truncate mb-1",children:b.user.email}),(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-sm",children:null==(l=b.user.role)?void 0:l.replace("_"," ")})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-5 border-b border-gray-700",children:[(0,r.jsxs)("h3",{className:"text-gray-300 text-xs font-bold uppercase tracking-wider mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Quick Actions"]}),(0,r.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,r.jsxs)("button",{onClick:()=>(e=>{switch(e){case"create-folder":N.push("/dashboard/files?action=create-folder");break;case"upload-files":N.push("/dashboard/files?action=upload");break;case"share-folder":N.push("/dashboard/files?action=share")}})(e.action),className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-xl hover:bg-gradient-to-r hover:from-blue-600 hover:to-purple-600 hover:text-white transition-all duration-200 group transform hover:scale-105",children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-white transition-colors"}),e.name]},e.action))})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-2 pb-4 overflow-y-auto",children:[(0,r.jsxs)("nav",{className:"flex-1 px-6 space-y-2",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("h3",{className:"text-gray-300 text-xs font-bold uppercase tracking-wider mb-3 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Navigation"]})}),y.map(e=>(0,r.jsxs)(i(),{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ".concat(S(e.href)?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transform scale-105":"text-gray-300 hover:bg-gradient-to-r hover:from-blue-600/20 hover:to-purple-600/20 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5 transition-colors ".concat(S(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name)),w&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"border-t border-gray-700 mt-8 pt-6",children:[(0,r.jsxs)("h3",{className:"px-4 text-xs font-bold text-gray-300 uppercase tracking-wider mb-4 flex items-center",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"Administration"]}),(0,r.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,r.jsxs)(i(),{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ".concat(S(e.href)?"bg-gradient-to-r from-red-600 to-pink-600 text-white shadow-lg transform scale-105":"text-gray-300 hover:bg-gradient-to-r hover:from-red-600/20 hover:to-pink-600/20 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5 transition-colors ".concat(S(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name))})]})})]}),(0,r.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-700",children:(0,r.jsxs)("button",{onClick:async()=>{try{await (0,a.signOut)({callbackUrl:"/auth/signin",redirect:!0})}catch(e){console.error("Logout error:",e),window.location.href="/auth/signin"}},className:"w-full group flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-xl hover:bg-gradient-to-r hover:from-red-600 hover:to-red-700 hover:text-white transition-all duration-200 transform hover:scale-105",children:[(0,r.jsx)(p.A,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-white transition-colors"}),"Sign Out"]})})]})]})}},5948:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var r=s(5155),a=s(2108),l=s(2115),i=s(5500);let n=l.forwardRef(function(e,t){let{title:s,titleId:r,...a}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},a),s?l.createElement("title",{id:r},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))});var d=s(4684),c=s(3782),o=s(5060);function x(){var e;let{data:t,status:s}=(0,a.useSession)(),[x,h]=(0,l.useState)(null),[m,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{"authenticated"===s&&g()},[s]);let g=async()=>{try{let e=await fetch("/api/admin/analytics");if(e.ok){let t=await e.json();h(t)}}catch(e){console.error("Error fetching analytics:",e)}finally{u(!1)}};return"loading"===s||m?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"ml-64 p-8",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})})})]}):t&&("SUPER_ADMIN"===t.user.role||"ADMIN"===t.user.role)?(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"ml-64 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"mb-8",children:(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,r.jsx)(i.A,{className:"h-8 w-8 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"System Analytics"}),(0,r.jsx)("p",{className:"text-gray-600 text-lg",children:"Monitor your system performance and activity"})]})]})})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(n,{className:"h-6 w-6 text-white"})})}),(0,r.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Users"}),(0,r.jsx)("dd",{className:"text-2xl font-bold text-gray-900",children:(null==x?void 0:x.totalUsers)||0})]})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(d.A,{className:"h-6 w-6 text-white"})})}),(0,r.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Files"}),(0,r.jsx)("dd",{className:"text-2xl font-bold text-gray-900",children:(null==x?void 0:x.totalFiles)||0})]})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(c.A,{className:"h-6 w-6 text-white"})})}),(0,r.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Shares"}),(0,r.jsx)("dd",{className:"text-2xl font-bold text-gray-900",children:(null==x?void 0:x.totalShares)||0})]})})]})}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"h-6 w-6 text-white"})})}),(0,r.jsx)("div",{className:"ml-4 w-0 flex-1",children:(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Storage Used"}),(0,r.jsx)("dd",{className:"text-2xl font-bold text-gray-900",children:x?"".concat((x.storageUsed/1024/1024).toFixed(2)," MB"):"0 MB"})]})})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200",children:(0,r.jsxs)("div",{className:"p-8",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Recent Activities"}),(0,r.jsx)("div",{className:"mt-5",children:(null==x||null==(e=x.recentActivities)?void 0:e.length)?(0,r.jsx)("div",{className:"flow-root",children:(0,r.jsx)("ul",{className:"-mb-8",children:x.recentActivities.map((e,t)=>(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"relative pb-8",children:[t!==x.recentActivities.length-1?(0,r.jsx)("span",{className:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,(0,r.jsxs)("div",{className:"relative flex space-x-3",children:[(0,r.jsx)("div",{children:(0,r.jsx)("span",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center ring-8 ring-white shadow-lg",children:(0,r.jsx)(d.A,{className:"h-4 w-4 text-white"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1 pt-1.5 flex justify-between space-x-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-sm text-gray-700 font-medium",children:e.details})}),(0,r.jsx)("div",{className:"text-right text-sm whitespace-nowrap text-gray-500",children:new Date(e.createdAt).toLocaleDateString()})]})]})]})},e.id))})}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(d.A,{className:"h-8 w-8 text-gray-400"})}),(0,r.jsx)("p",{className:"text-gray-500 text-lg",children:"No recent activities"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Activity will appear here when users interact with the system"})]})})]})})]})})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,r.jsx)(o.A,{}),(0,r.jsx)("main",{className:"ml-64 p-8",children:(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})})})]})}}},e=>{e.O(0,[108,249,607,441,964,358],()=>e(e.s=3891)),_N_E=e.O()}]);