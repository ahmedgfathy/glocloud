(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[733],{1151:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(2115);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))})},5060:(e,t,s)=>{"use strict";s.d(t,{A:()=>j});var r=s(5155),a=s(2108),l=s(6874),n=s.n(l),i=s(6766),c=s(5695),d=s(9994),o=s(5433),x=s(3782),m=s(4219),h=s(5500),u=s(5246),f=s(5141),g=s(3742),p=s(5895),w=s(5596);function j(){var e,t,s;let{data:l}=(0,a.useSession)(),j=(0,c.usePathname)(),b=(null==l||null==(e=l.user)?void 0:e.role)==="SUPER_ADMIN"||(null==l||null==(t=l.user)?void 0:t.role)==="ADMIN",N=[{name:"Dashboard",href:"/dashboard",icon:d.A},{name:"My Files",href:"/dashboard/files",icon:o.A},{name:"Shared with Me",href:"/dashboard/shared",icon:x.A}],v=[{name:"User Management",href:"/admin/users",icon:m.A},{name:"System Analytics",href:"/admin/analytics",icon:h.A},{name:"Settings",href:"/admin/settings",icon:u.A}],y=[{name:"Create Folder",icon:f.A,action:"create-folder"},{name:"Upload Files",icon:g.A,action:"upload-files"},{name:"Share Folder",icon:x.A,action:"share-folder"}],k=e=>j===e||j.startsWith(e+"/");return(0,r.jsxs)("div",{className:"flex flex-col w-64 bg-gray-900 text-white min-h-screen",children:[(0,r.jsx)("div",{className:"flex items-center h-16 px-6 bg-gray-800",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsxs)("div",{className:"w-8 h-8 bg-white rounded-lg flex items-center justify-center",children:[(0,r.jsx)(i.default,{src:"/logo.svg",alt:"Company Logo",width:24,height:24,className:"w-6 h-6",onError:e=>{e.currentTarget.style.display="none"}}),(0,r.jsx)(p.A,{className:"h-6 w-6 text-blue-600 hidden"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-white text-lg font-bold",children:"PMS Cloud"}),(0,r.jsx)("p",{className:"text-gray-300 text-xs",children:"File Management"})]})]})}),(null==l?void 0:l.user)&&(0,r.jsx)("div",{className:"px-6 py-4 bg-gray-800 border-b border-gray-700",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-medium text-sm",children:null==(s=l.user.name)?void 0:s.charAt(0).toUpperCase()})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-white text-sm font-medium truncate",children:l.user.name}),(0,r.jsx)("p",{className:"text-gray-300 text-xs truncate",children:l.user.email}),(0,r.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 mt-1",children:l.user.role})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700",children:[(0,r.jsx)("h3",{className:"text-gray-300 text-xs font-semibold uppercase tracking-wider mb-3",children:"Quick Actions"}),(0,r.jsx)("div",{className:"space-y-2",children:y.map(e=>(0,r.jsxs)("button",{onClick:()=>(e=>{switch(e){case"create-folder":window.location.href="/dashboard/files?action=create-folder";break;case"upload-files":window.location.href="/dashboard/files?action=upload";break;case"share-folder":window.location.href="/dashboard/files?action=share"}})(e.action),className:"w-full flex items-center px-3 py-2 text-sm font-medium text-gray-300 rounded-lg hover:bg-gray-800 hover:text-white transition-colors group",children:[(0,r.jsx)(e.icon,{className:"mr-3 h-4 w-4 text-gray-400 group-hover:text-white"}),e.name]},e.action))})]}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[(0,r.jsxs)("nav",{className:"flex-1 px-6 space-y-1",children:[N.map(e=>(0,r.jsxs)(n(),{href:e.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(k(e.href)?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5 ".concat(k(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name)),b&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"border-t border-gray-700 mt-6 pt-6",children:[(0,r.jsx)("h3",{className:"px-3 text-xs font-semibold text-gray-300 uppercase tracking-wider mb-3",children:"Administration"}),(0,r.jsx)("div",{className:"space-y-1",children:v.map(e=>(0,r.jsxs)(n(),{href:e.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(k(e.href)?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-800 hover:text-white"),children:[(0,r.jsx)(e.icon,{className:"mr-3 h-5 w-5 ".concat(k(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name))})]})})]}),(0,r.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-700",children:(0,r.jsxs)("button",{onClick:async()=>{try{await (0,a.signOut)({callbackUrl:"/auth/signin",redirect:!0})}catch(e){console.error("Logout error:",e),window.location.href="/auth/signin"}},className:"w-full group flex items-center px-3 py-2 text-sm font-medium text-gray-300 rounded-lg hover:bg-red-600 hover:text-white transition-colors",children:[(0,r.jsx)(w.A,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-white"}),"Sign Out"]})})]})]})}},5172:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(2108),n=s(5695);let i=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z"}))});var c=s(8246);let d=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}),o=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}),x=a.forwardRef(function(e,t){let{title:s,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),s?a.createElement("title",{id:r},s):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});var m=s(1151),h=s(5060);function u(){let{data:e,status:t}=(0,l.useSession)(),s=(0,n.useRouter)(),[u,f]=(0,a.useState)([]),[g,p]=(0,a.useState)(!0),[w,j]=(0,a.useState)(null),[b,N]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if("unauthenticated"===t)return void s.push("/auth/signin");if("authenticated"===t){var r,a;if((null==e||null==(r=e.user)?void 0:r.role)!=="SUPER_ADMIN"&&(null==e||null==(a=e.user)?void 0:a.role)!=="ADMIN")return void s.push("/dashboard");v()}},[t,e,s]);let v=async()=>{try{let e=await fetch("/api/users");if(e.ok){let t=await e.json();f(t)}}catch(e){console.error("Error fetching users:",e)}finally{p(!1)}},y=async e=>{if(confirm("Are you sure you want to delete this user?"))try{(await fetch("/api/users/".concat(e),{method:"DELETE"})).ok&&f(u.filter(t=>t.id!==e))}catch(e){console.error("Error deleting user:",e)}};if("loading"===t||g)return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(h.A,{}),(0,r.jsx)("main",{className:"flex-1 ml-64 p-6",children:(0,r.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]});let k=u.length,A=u.filter(e=>e.isActive),E=u.filter(e=>"ADMIN"===e.role||"SUPER_ADMIN"===e.role);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,r.jsx)(h.A,{}),(0,r.jsx)("main",{className:"flex-1 ml-64 p-6",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage system users, roles, and permissions"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(d,{className:"h-8 w-8 text-blue-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Total Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:k})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"h-8 w-8 bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-3 w-3 bg-green-600 rounded-full"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Active Users"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-green-600",children:A.length})]})]})}),(0,r.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(c.A,{className:"h-8 w-8 text-purple-600"})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Administrators"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:E.length})]})]})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"All Users"}),(0,r.jsxs)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,r.jsx)(o,{className:"h-4 w-4 mr-2"}),"Add User"]})]})}),(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(e=>{var t;let s;return(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,r.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,r.jsx)(d,{className:"h-6 w-6 text-gray-600"})})}),(0,r.jsxs)("div",{className:"ml-4",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(t=e.role,(0,r.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat({SUPER_ADMIN:"bg-red-100 text-red-800",ADMIN:"bg-blue-100 text-blue-800",EMPLOYEE:"bg-green-100 text-green-800"}[t]),children:["SUPER_ADMIN"===t&&(0,r.jsx)(i,{className:"h-3 w-3 mr-1"}),"ADMIN"===t&&(0,r.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"EMPLOYEE"===t&&(0,r.jsx)(d,{className:"h-3 w-3 mr-1"}),t.replace("_"," ")]}))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(s=e.isActive,(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(s?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:s?"Active":"Inactive"}))}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,r.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.isExternal?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"),children:e.isExternal?"External":"Internal"})}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>{j(e),N(!0)},className:"text-blue-600 hover:text-blue-900",children:(0,r.jsx)(x,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>y(e.id),className:"text-red-600 hover:text-red-900",children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]})]})})]})}},5627:(e,t,s)=>{Promise.resolve().then(s.bind(s,5172))},8246:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(2115);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))})}},e=>{e.O(0,[108,249,607,441,964,358],()=>e(e.s=5627)),_N_E=e.O()}]);