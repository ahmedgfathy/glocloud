(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[122],{718:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var t=s(5155),a=s(2108),l=s(2115),n=s(5246);let i=l.forwardRef(function(e,r){let{title:s,titleId:t,...a}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 17.25v-.228a4.5 4.5 0 0 0-.12-1.03l-2.268-9.64a3.375 3.375 0 0 0-3.285-2.602H7.923a3.375 3.375 0 0 0-3.285 2.602l-2.268 9.64a4.5 4.5 0 0 0-.12 1.03v.228m19.5 0a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3m19.5 0a3 3 0 0 0-3-3H5.25a3 3 0 0 0-3 3m16.5 0h.008v.008h-.008v-.008Zm-3 0h.008v.008h-.008v-.008Z"}))});var o=s(8246);let d=l.forwardRef(function(e,r){let{title:s,titleId:t,...a}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},a),s?l.createElement("title",{id:t},s):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))});var c=s(5060);function m(){let{data:e,status:r}=(0,a.useSession)(),[s,m]=(0,l.useState)({maxFileSize:"100",allowedFileTypes:"jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,ppt,pptx,mp4,mov,avi,zip,rar",emailNotifications:!0,autoApproveUsers:!1,maxStoragePerUser:"1000",sessionTimeout:"24"}),[x,h]=(0,l.useState)(!1),[u,g]=(0,l.useState)(""),f=async()=>{h(!0);try{(await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)})).ok?(g("Settings saved successfully!"),setTimeout(()=>g(""),3e3)):g("Error saving settings")}catch(e){g("Error saving settings")}finally{h(!1)}};return"loading"===r?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("main",{className:"ml-64 p-8",children:(0,t.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})})})]}):e&&("SUPER_ADMIN"===e.user.role||"ADMIN"===e.user.role)?(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("main",{className:"ml-64 p-8",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,t.jsx)("div",{className:"mb-8",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg p-8 border border-gray-200",children:(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,t.jsx)(n.A,{className:"h-8 w-8 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"System Settings"}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Manage system configuration and preferences"})]})]})})}),u&&(0,t.jsx)("div",{className:"mb-6 rounded-2xl p-4 border ".concat(u.includes("Error")?"bg-red-50 text-red-800 border-red-200":"bg-green-50 text-green-800 border-green-200"),children:u}),(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-600 rounded-xl flex items-center justify-center mr-3",children:(0,t.jsx)(i,{className:"h-5 w-5 text-white"})}),"File Upload Settings"]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max File Size (MB)"}),(0,t.jsx)("input",{type:"number",value:s.maxFileSize,onChange:e=>m({...s,maxFileSize:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Max Storage Per User (MB)"}),(0,t.jsx)("input",{type:"number",value:s.maxStoragePerUser,onChange:e=>m({...s,maxStoragePerUser:e.target.value}),className:"w-full px-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Allowed File Types (comma-separated)"}),(0,t.jsx)("textarea",{value:s.allowedFileTypes,onChange:e=>m({...s,allowedFileTypes:e.target.value}),rows:3,className:"w-full px-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-3",children:(0,t.jsx)(o.A,{className:"h-5 w-5 text-white"})}),"Security Settings"]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Auto-approve new users"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Automatically approve new user registrations"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>m({...s,autoApproveUsers:!s.autoApproveUsers}),className:"".concat(s.autoApproveUsers?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-200"," relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-lg"),children:(0,t.jsx)("span",{className:"".concat(s.autoApproveUsers?"translate-x-5":"translate-x-0"," pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Session Timeout (hours)"}),(0,t.jsx)("input",{type:"number",value:s.sessionTimeout,onChange:e=>m({...s,sessionTimeout:e.target.value}),className:"w-full sm:w-48 px-4 py-3 border border-gray-200 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200",children:(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900 flex items-center mb-6",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-500 to-red-600 rounded-xl flex items-center justify-center mr-3",children:(0,t.jsx)(d,{className:"h-5 w-5 text-white"})}),"Email Settings"]}),(0,t.jsx)("div",{className:"p-4 bg-gray-50 rounded-xl",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Email Notifications"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Send email notifications for file shares and system updates"})]}),(0,t.jsx)("button",{type:"button",onClick:()=>m({...s,emailNotifications:!s.emailNotifications}),className:"".concat(s.emailNotifications?"bg-gradient-to-r from-blue-500 to-blue-600":"bg-gray-200"," relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-all duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 shadow-lg"),children:(0,t.jsx)("span",{className:"".concat(s.emailNotifications?"translate-x-5":"translate-x-0"," pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out")})})]})})]})}),(0,t.jsx)("div",{className:"flex justify-end",children:(0,t.jsx)("button",{onClick:f,disabled:x,className:"inline-flex items-center px-8 py-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold rounded-2xl shadow-lg hover:from-blue-600 hover:to-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 transition-all duration-200 transform hover:scale-105",children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Saving..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.A,{className:"h-5 w-5 mr-3"}),"Save Settings"]})})})]})]})})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[(0,t.jsx)(c.A,{}),(0,t.jsx)("main",{className:"ml-64 p-8",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Access Denied"}),(0,t.jsx)("p",{className:"text-gray-600",children:"You don't have permission to view this page."})]})})})]})}},3777:(e,r,s)=>{Promise.resolve().then(s.bind(s,718))},5060:(e,r,s)=>{"use strict";s.d(r,{A:()=>v});var t=s(5155),a=s(2108),l=s(6874),n=s.n(l),i=s(6766),o=s(5695),d=s(9994),c=s(5433),m=s(3782),x=s(4219),h=s(5500),u=s(5246),g=s(5141),f=s(3742),b=s(5895),p=s(5596);function v(){var e,r,s,l;let{data:v}=(0,a.useSession)(),j=(0,o.usePathname)(),w=(0,o.useRouter)(),y=(null==v||null==(e=v.user)?void 0:e.role)==="SUPER_ADMIN"||(null==v||null==(r=v.user)?void 0:r.role)==="ADMIN",N=[{name:"Dashboard",href:"/dashboard",icon:d.A},{name:"My Files",href:"/dashboard/files",icon:c.A},{name:"Shared with Me",href:"/dashboard/shared",icon:m.A}],k=[{name:"User Management",href:"/admin/users",icon:x.A},{name:"System Analytics",href:"/admin/analytics",icon:h.A},{name:"Settings",href:"/admin/settings",icon:u.A}],A=[{name:"Create Folder",icon:g.A,action:"create-folder"},{name:"Upload Files",icon:f.A,action:"upload-files"},{name:"Share Folder",icon:m.A,action:"share-folder"}],S=e=>j===e||j.startsWith(e+"/");return(0,t.jsxs)("div",{className:"fixed left-0 top-0 bottom-0 flex flex-col w-64 bg-gradient-to-b from-gray-900 to-black text-white shadow-2xl z-30",children:[(0,t.jsx)("div",{className:"flex items-center h-16 px-6 bg-black border-b border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsxs)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg",children:[(0,t.jsx)(i.default,{src:"/logo.svg",alt:"Company Logo",width:24,height:24,className:"w-6 h-6",onError:e=>{e.currentTarget.style.display="none"}}),(0,t.jsx)(b.A,{className:"h-6 w-6 text-white hidden"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-white text-xl font-bold tracking-tight",children:"PMS Cloud"}),(0,t.jsx)("p",{className:"text-gray-300 text-xs font-medium",children:"File Management System"})]})]})}),(null==v?void 0:v.user)&&(0,t.jsx)("div",{className:"px-6 py-5 bg-gray-800/50 border-b border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-lg",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:null==(s=v.user.name)?void 0:s.charAt(0).toUpperCase()})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("p",{className:"text-white text-sm font-semibold truncate",children:v.user.name}),(0,t.jsx)("p",{className:"text-gray-300 text-xs truncate mb-1",children:v.user.email}),(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-sm",children:null==(l=v.user.role)?void 0:l.replace("_"," ")})]})]})}),(0,t.jsxs)("div",{className:"px-6 py-5 border-b border-gray-700",children:[(0,t.jsxs)("h3",{className:"text-gray-300 text-xs font-bold uppercase tracking-wider mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Quick Actions"]}),(0,t.jsx)("div",{className:"space-y-2",children:A.map(e=>(0,t.jsxs)("button",{onClick:()=>(e=>{switch(e){case"create-folder":w.push("/dashboard/files?action=create-folder");break;case"upload-files":w.push("/dashboard/files?action=upload");break;case"share-folder":w.push("/dashboard/files?action=share")}})(e.action),className:"w-full flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-xl hover:bg-gradient-to-r hover:from-blue-600 hover:to-purple-600 hover:text-white transition-all duration-200 group transform hover:scale-105",children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-white transition-colors"}),e.name]},e.action))})]}),(0,t.jsxs)("div",{className:"flex-1 flex flex-col pt-2 pb-4 overflow-y-auto",children:[(0,t.jsxs)("nav",{className:"flex-1 px-6 space-y-2",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)("h3",{className:"text-gray-300 text-xs font-bold uppercase tracking-wider mb-3 flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Navigation"]})}),N.map(e=>(0,t.jsxs)(n(),{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ".concat(S(e.href)?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg transform scale-105":"text-gray-300 hover:bg-gradient-to-r hover:from-blue-600/20 hover:to-purple-600/20 hover:text-white"),children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5 transition-colors ".concat(S(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name)),y&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{className:"border-t border-gray-700 mt-8 pt-6",children:[(0,t.jsxs)("h3",{className:"px-4 text-xs font-bold text-gray-300 uppercase tracking-wider mb-4 flex items-center",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"Administration"]}),(0,t.jsx)("div",{className:"space-y-2",children:k.map(e=>(0,t.jsxs)(n(),{href:e.href,className:"group flex items-center px-4 py-3 text-sm font-medium rounded-xl transition-all duration-200 ".concat(S(e.href)?"bg-gradient-to-r from-red-600 to-pink-600 text-white shadow-lg transform scale-105":"text-gray-300 hover:bg-gradient-to-r hover:from-red-600/20 hover:to-pink-600/20 hover:text-white"),children:[(0,t.jsx)(e.icon,{className:"mr-3 h-5 w-5 transition-colors ".concat(S(e.href)?"text-white":"text-gray-400 group-hover:text-white")}),e.name]},e.name))})]})})]}),(0,t.jsx)("div",{className:"flex-shrink-0 px-6 py-4 border-t border-gray-700",children:(0,t.jsxs)("button",{onClick:async()=>{try{await (0,a.signOut)({callbackUrl:"/auth/signin",redirect:!0})}catch(e){console.error("Logout error:",e),window.location.href="/auth/signin"}},className:"w-full group flex items-center px-4 py-3 text-sm font-medium text-gray-300 rounded-xl hover:bg-gradient-to-r hover:from-red-600 hover:to-red-700 hover:text-white transition-all duration-200 transform hover:scale-105",children:[(0,t.jsx)(p.A,{className:"mr-3 h-5 w-5 text-gray-400 group-hover:text-white transition-colors"}),"Sign Out"]})})]})]})}},8246:(e,r,s)=>{"use strict";s.d(r,{A:()=>a});var t=s(2115);let a=t.forwardRef(function(e,r){let{title:s,titleId:a,...l}=e;return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":a},l),s?t.createElement("title",{id:a},s):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))})}},e=>{e.O(0,[108,249,607,441,964,358],()=>e(e.s=3777)),_N_E=e.O()}]);